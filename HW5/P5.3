if [ "$#" -ne 1 ]
then
    echo "Usage: $0 filename"
    exit 1
fi

file=$1

if [ ! -f "$file" ]
then
    echo "File not found!"
    exit 1
fi

while IFS= read -r line
do
    first_word=$(echo "$line" | sed -E 's/^([a-zA-Z0-9_@]+).*/\1/')
    
    last_word=$(echo "$line" | sed -E 's/.*[[:space:]]([a-zA-Z0-9_@]+)$/\1/')
    
    match_found=false
    
    for length in $(seq 1 ${#first_word})
    do
        substring=${first_word:0:$length}
        if echo "$last_word" | grep -q "${substring}${substring}"
        then
            match_found=true
            break
        fi
    done
    
    if [ "$match_found" = true ]
    then
        echo "$line"
    fi
done < "$file"
